format_version: 10
pipelines:
  cortex-cli-pr:
    group: pull-requests
    label_template: ${COUNT}
    materials:
      cortex-cli:
        plugin_configuration:
          id: github.pr
          version: 1
        options:
          url: git@github.com:CognitiveScale/cortex-cli.git
          defaultBranch: develop
    stages:
    - build:
        fetch_materials: true
        clean_workspace: true
        approval:
          type: success
          allow_only_on_success: false
        jobs:
          Build:
            elastic_profile_id: gocd-test-agent-dind
            timeout: 0
            tasks:
            - script: |
                set -eux
                git clone git@github.com:CognitiveScale/gocd-pipeline-scripts.git
                ./gocd-pipeline-scripts/common/c12e-common.sh dev

